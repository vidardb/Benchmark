-- Create VidarDB benchmark table --

DROP TABLE IF EXISTS LINEITEM;
DROP FOREIGN TABLE IF EXISTS LINEITEM;
DROP TYPE IF EXISTS ORDERKEY_LINENUMBER;
DROP SERVER IF EXISTS vidardb;  
DROP EXTENSION IF EXISTS kv_fdw;

CREATE EXTENSION kv_fdw;
CREATE SERVER vidardb FOREIGN DATA WRAPPER kv_fdw;

CREATE TYPE ORDERKEY_LINENUMBER AS (
    L_ORDERKEY    INTEGER,
    L_LINENUMBER  INTEGER
);

CREATE FOREIGN TABLE LINEITEM (
    L_ORDERKEY    ORDERKEY_LINENUMBER NOT NULL,
    L_PARTKEY     INTEGER NOT NULL,
    L_SUPPKEY     INTEGER NOT NULL,
    L_QUANTITY    DECIMAL(15,2) NOT NULL,
    L_EXTENDEDPRICE  DECIMAL(15,2) NOT NULL,
    L_DISCOUNT    DECIMAL(15,2) NOT NULL,
    L_TAX         DECIMAL(15,2) NOT NULL,
    L_RETURNFLAG  CHAR(1) NOT NULL,
    L_LINESTATUS  CHAR(1) NOT NULL,
    L_SHIPDATE    DATE NOT NULL,
    L_COMMITDATE  DATE NOT NULL,
    L_RECEIPTDATE DATE NOT NULL,
    L_SHIPINSTRUCT CHAR(25) NOT NULL,
    L_SHIPMODE     CHAR(10) NOT NULL,
    L_COMMENT      VARCHAR(44) NOT NULL
) SERVER vidardb;

-- Insert example --
-- INSERT INTO LINEITEM VALUES ((5086273,1),182032,4551,21,23394.63,0.02,0.07,'A','F','1992-12-07','1992-12-16','1992-12-18','TAKE BACK RETURN','RAIL','s. furiously special packages detect blithe');
-- SELECT * FROM LINEITEM;